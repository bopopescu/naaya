
<dtml-let hd_users_folder_path="getUserFolderPath()"
                    hd_users_folder="getUserFolder()"
                    hd_users_folder_type_zope="isUserFolderZope()"
                    hd_users_folder_type_ldap="isUserFolderLdap()"
					hd_users_folder_type_naaya="isUserFolderNaaya()">

<p class="form-help">
    The users for HelpDesk are taken from the following <b><dtml-var "hd_users_folder.meta_type"></b> : <b>'<dtml-var hd_users_folder_path>'</b>.<br>
    <dtml-if hd_users_folder_type_zope>
        Because these are Zope users, you must provide additional infos (first name, last name and email).
    </dtml-if>
    <dtml-if hd_users_folder_type_ldap>
        Because these are LDAP users, you don't need to provide any additional infos (first name, last name or email).<br>
        Note: You have to map the <b>mail</b> property of LDAP users to <b>mail</b> in the LDAP Schema.
    </dtml-if>
	<dtml-if hd_users_folder_type_naaya>
		Because these are Naaya users, you don't need to provide any additional infos
		(first name, last name or email).<br />
	</dtml-if>
</p>
<hr noshade size="1">

<dtml-comment>
	Load specific form for each type of user folder.
</dtml-comment>
<dtml-if hd_users_folder_type_zope>
	<dtml-var admin_users_zope_form_html>
</dtml-if>

<dtml-if hd_users_folder_type_ldap>
	<dtml-var admin_users_ldap_form_html>
</dtml-if>

<dtml-if hd_users_folder_type_naaya>
	<dtml-var admin_users_naaya_form_html>
</dtml-if>

<hr noshade size="1">

<form name="frmdelete" method="post" action="manageUser">
<table border="0" cellspacing="2" cellpadding="2" width="100%">
    <tr>
        <td class="cellheader" width="1%">&nbsp;</td>
        <td class="cellheader"><b>User</b></td>
        <td class="cellheader"><b>Name</b></td>
        <td class="cellheader"><b>Email</b></td>
        <td class="cellheader"><b>Role(s)</b></td>
    </tr>
    <dtml-in "getListUser()">
    <dtml-comment>
        style stuff
    </dtml-comment>
    <dtml-if sequence-odd>
        <dtml-call "REQUEST.set('cellclass', 'cellodd')">
    <dtml-else>
        <dtml-call "REQUEST.set('cellclass', 'celleven')">
    </dtml-if>
    <dtml-comment>
        check what kind of user is this and load his properties
    </dtml-comment>
    <dtml-call "REQUEST.set('local_user_id', id)">
    <dtml-call "REQUEST.set('local_role', role)">
    <dtml-call "REQUEST.set('local_zope_user', zope_user)">
    <dtml-call "REQUEST.set('local_email', getUserEmail(id))">
    <dtml-call "REQUEST.set('local_full_name', getUserName(id))">
    <tr>
        <td class="<dtml-var cellclass>" width="1%"><input type="checkbox" name="ids" value="<dtml-var id html_quote>"></td>
        <td class="<dtml-var cellclass>"><a class="itemlink" href="admin_html?pagetab=6&amp;user=<dtml-var local_zope_user url_quote>" title="Edit user infos"><dtml-var local_zope_user html_quote></a></td>
        <td class="<dtml-var cellclass>"><dtml-var local_full_name html_quote></td>
        <td class="<dtml-var cellclass>"><dtml-var local_email html_quote></td>
        <td class="<dtml-var cellclass>"><dtml-var local_role html_quote></td>
    </tr>
    </dtml-in>
    <tr>
        <td class="cell">&nbsp;</td>
        <td class="cell" colspan="4"><input type="submit" name="delete" value="Delete"></td>
    </tr>
</table>
</form>

</dtml-let>
